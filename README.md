# Log Analyzer

Log Analyzer - скрипт для обработки логов и генерации отчетов
о производительности API. Этот проект позволяет анализировать логи,
генерировать отчеты по времени ответа API и статистике User-Agent.
Он использует библиотеку `argparse` для обработки аргументов
командной строки и `tabulate` для форматирования результатов в виде таблицы.

### Особенности

- Чтение логов из файла в формате JSON.
- Генерация отчета о среднем времени отклика по конечным точкам API.
- Генерация отчета по User-Agent, показывающего, какие браузеры использовались для доступа к API.
- Возможность фильтрации логов по дате.

### Требования:

- Python 3.12.9
- tabulate 0.9.0
- argparse
- #### Установить библиотеку `tabulate`: `pip install tabulate`

### Структура:

- `screenshots` - скриншоты работы скрипта и тестов
- `example1.log` и `example2.log` - примеры лог-файлов.
- `main.py` - основной файл с кодом.
- `requirements.txt` - требования для запуска кода
- `tests.py` - тесты для 'main.py'

# Запуск:

### Команда для запуска:

`python main.py --files <путь_к_логам> --report <тип_отчета> [--date <дата>]`

### Аргументы

- `--files`: Путь или пути к файлам логов (можно указать несколько файлов).
- `--report`: Тип отчета для генерации. Доступные варианты:
    - `average` - отчет о среднем времени отклика по конечным точкам.
    - `user-agent` - отчет о статистике User-Agent.
- `--date`: (необязательный) Дата для фильтрации логов в формате YYYY-MM-DD.

### Примеры команд

- Установить библиотеку `tabulate`:
    - `pip install tabulate`
- Обработка лог-файла:
    - `python main.py --file example1.log --report average`
- Обработка нескольких лог-файлов:
    - `python main.py --file example1.log example2.log --report average`
- Обработка по дате в формате `YYYY-mm-dd`:
    - `python main.py --file example1.log --report average --date YYYY-mm-dd`
- Обработка user-agent
    - `python main.py --file example1.log --report user-agent  `

### Формат логов

Логи должны быть в формате JSON, где каждая строка представляет собой запись лога. Например:

```
{"@timestamp": "2025-06-22T12:00:00", "url": "/api/v1/resource", "response_time": 200, "http_user_agent": "Mozilla/5.0"}
{"@timestamp": "2025-06-22T12:05:00", "url": "/api/v1/resource", "response_time": 300, "http_user_agent": "Mozilla/5.0"}
```

# Вывод отчета:

Скрипт сгенерирует и выведет отчет в виде таблицы, показывающей:

- Endpoint: URL конечного пункта.
- Request Count: Количество запросов к данному конечному пункту.
- Average Response Time: Среднее время ответа для данного конечного пункта.

# Тесты

- Запуск тестов командой: `python -m unittest tests.py`